#### Sandboxes
- Access the node
```
docker exec -it securing-k8s-cluster-worker sh
```{{exec}}

- Install gvisor
```

(
apt-get update && \
apt-get install -y apt-transport-https ca-certificates curl gnupg-agent software-properties-common nano wget
set -e
ARCH=$(uname -m)
URL=https://storage.googleapis.com/gvisor/releases/release/latest/${ARCH}
wget ${URL}/runsc ${URL}/runsc.sha512  ${URL}/containerd-shim-runsc-v1 ${URL}/containerd-shim-runsc-v1.sha512
sha512sum -c runsc.sha512 -c containerd-shim-runsc-v1.sha512
rm -f *.sha512
chmod a+rx runsc containerd-shim-runsc-v1
mv runsc containerd-shim-runsc-v1 /usr/local/bin
)
```{{exec}}

- Add gviso runsc runtime

```
nano /etc/containerd/config.toml

## Add the below at the end of config file
[plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runsc]
  runtime_type = "io.containerd.runsc.v1"
```

- Create runtime class
```
cat <<EOF | kubectl apply -f -
apiVersion: node.k8s.io/v1
kind: RuntimeClass
metadata:
  name: gvisor
handler: runsc
EOF
```{{exec}}

- Create a new pod using gvisor runtime

```
cat <<EOF | kubectl apply -f -
apiVersion: v1
kind: Pod
metadata:
  name: nginx-gvisor
spec:
  runtimeClassName: gvisor
  containers:
  - name: nginx
    image: nginx
EOF
```{{exec}}

- Check logs of pod

```
 kubectl exec  nginx-gvisor -- dmesg
 ```{{exec}}
